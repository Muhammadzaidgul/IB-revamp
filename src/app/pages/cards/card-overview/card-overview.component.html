<div class="row customerInfo p-3">
    <div class="h4">Debit Card </div>
</div>
<div class="row">
    <div class="col-md-6 col-lg-6 col-sm-12 p-4">
        <div class="relationship-bg p-3 pt-4">

            <div class="d-flex justify-content-around">
                <div class="col-1 align-content-center align-items-center">
                    <div class="align-content-center">
                        <i class="fa fa-arrow-left primary-font-color" (click)="carousel.prev()" ></i>
                    </div>
                </div>
    
                <div class="col-10">
                    <mdb-carousel #carousel
                        [controls]="true"
                        [controls]="false"
                        [interval]="0"
                        [indicators]="true"
                        [id]="0"
                        class="relationship-bg mt-0">
                  
              @for (item of cards; track $index) {
                
                <mdb-carousel-item>

                    <div class="card-title-bg text-center w-75 m-auto">
                        <p class="p-2">{{ item.accountType }}</p>
                    </div>
                    
                    <div class="card-body ">
                                
                        <div class="row">
                            <div class="d-flex justify-content-center">
                                
                                
                                <img  *ngIf="isCardLocked" src="assets/img/icons/lock-black.svg" alt="" class="position-absolute mt-3 mt-sm-5">
                                

                                <img alt="image" src="{{item.cardImg}}" class="img-fluid w-100 m-auto"  style="box-shadow: none;">
                                
                            </div>
                        </div>
        
                    </div>
    
                </mdb-carousel-item>
              }
              @empty {
                <p>No Card Found</p>
              }
            
            </mdb-carousel>
                </div>
    
                <div class="col-1 align-content-center align-items-center text-end">
                    <div>
                        <i class="fa fa-arrow-right primary-font-color" (click)="carousel.next()"></i>
                    </div>
                </div>
            </div>
            
        </div>

        <!-- Inactive Card -->
        <div class="p-3 m-2 mt-4 activatecardBox" *ngIf="activeCard">
            <p> <img src="/assets/img/icons/info.svg" alt=""> Your card is inactive</p>
            <p>
                Activate your card to use it for online payments, point of sale transactions, and ATM withdrawals.
            </p>

            <button class="btn btn-danger" routerLink="/activate-card">Activate card now  <img src="/assets/img/icons/arrow-right-white.svg" alt=""> </button>
        </div>
        <!-- End -->

         <!-- More Options -->
         <div *ngIf="showDetails">
            <div class="d-flex justify-content-center mt-3">
            <div class="frame ms-3 me-3" data-toggle="modal" (click)="cardDetailsModal()" style="cursor: pointer;">
                <div class="tabler-icon-wrapper">
                <img class="tabler-icon" src="/assets/img/icons/eye.svg" />
                </div>
                <div class="text-wrapper pt-1">See details</div>
            </div>

            <div class="frame ms-3 me-3" data-toggle="modal" (click)="lockCardModal()" >
                <div class="tabler-icon-wrapper" [style.background-color]="unlockCardColor">
                <img class="tabler-icon" src="/assets/img/icons/lock.svg" />
                </div>
                            
                <div class="text-wrapper pt-1"> {{isCardLocked ? 'Unlock Card' : 'Lock Card'}}  </div>

            </div>

            <div class="frame ms-3 me-3" data-toggle="modal" (click)="manageCardModal()">
                <div class="tabler-icon-wrapper">
                <img class="tabler-icon"  [src]="starIcon" />
                </div>
                <div class="text-wrapper pt-1" [style.color]="disableColor">Manage Card</div>
            </div>

        
            </div>
         </div>
        <!-- End -->

         <div class="mt-4" *ngIf="showDetails">
            <h5>Card Limits</h5>

            <div>
                <p class="ps-0">Daily ATM Withdrawls</p>
                <progressbar [max]="max" [value]="dynamic" [striped]="false" [animate]="false" style="border-radius: 30px; height: 10px; width: 100%;" class="m-auto">
                </progressbar>
                <div class="d-flex justify-content-between pt-2">
                    <small> <b>PKR 15,000</b> </small>
                    <small> <b>PKR 50,000</b> </small>
                </div>
                <div class="d-flex justify-content-between">
                    <small> Spent </small>
                    <small> Total </small>
                </div>
            </div>

            <div class="mt-3">
                <p class="ps-0">Daily transfer limit</p>
                <progressbar [max]="max" [value]="dynamic" [striped]="false" [animate]="false" style="border-radius: 30px; height: 10px; width: 100%;" class="m-auto">
                </progressbar>
                <div class="d-flex justify-content-between pt-2">
                    <small> <b>PKR 15,000</b> </small>
                    <small> <b>PKR 50,000</b> </small>
                </div>
                <div class="d-flex justify-content-between">
                    <small> Spent </small>
                    <small> Total </small>
                </div>
            </div>

            <div class="mt-3">
                <p class="ps-0">Daily POS/E-commerce limit</p>
                <progressbar [max]="max" [value]="dynamic" [striped]="false" [animate]="false" style="border-radius: 30px; height: 10px; width: 100%;" class="m-auto">
                </progressbar>
                <div class="d-flex justify-content-between pt-2">
                    <small> <b>PKR 15,000</b> </small>
                    <small> <b>PKR 50,000</b> </small>
                </div>
                <div class="d-flex justify-content-between">
                    <small> Spent </small>
                    <small> Total </small>
                </div>
            </div>

            <div class="mt-3">
                <p class="ps-0">Annual USD limit</p>
                <progressbar [max]="max" [value]="dynamic" [striped]="false" [animate]="false" style="border-radius: 30px; height: 10px; width: 100%;" class="m-auto">
                </progressbar>
                <div class="d-flex justify-content-between pt-2">
                    <small> <b>PKR 15,000</b> </small>
                    <small> <b>PKR 50,000</b> </small>
                </div>
                <div class="d-flex justify-content-between">
                    <small> Spent </small>
                    <small> Total </small>
                </div>
            </div>

         </div>        
    </div>
    <div class="col-md-6 col-lg-6 col-sm-12">
     
        <!-- Recent Transactions -->
       <div>
        <div class="pb-0 d-flex justify-content-between mt-5 pe-0">
            <h5 class="pb-0 mb-0" >  <b>Recent transactions</b></h5>
            
            <h6 class="primary-font-color" *ngIf="showDetails">
                <div class="d-flex">
                    <a routerLink="/card/transaction-history" class="primary-font-color">See all </a>
                    <img src="/assets/img/icons/caret-right-red.svg" alt="" class="tabler-icon ">
                </div>
            </h6>
        </div> 
        <div class="table-responsive p-0 mt-md-0 mt-lg-0" data-aos="fade-up" data-aos-duration="1000">
            @if (showDetails) {
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z " style="box-shadow: none;">
          
                    <!-- Position Column -->
                    <ng-container matColumnDef="transactionType">
                      <th mat-header-cell *matHeaderCellDef >  </th>
                      <td mat-cell *matCellDef="let element" class="text-start align-content-center">
                            <div class="frame-rt">
                                <div class="div-rt p-2 ps-0">
                                    
                                    <img src="/assets/img/icons/amount-debit.svg" alt="amount-credit" class="p-1">
            
                                    <div class="div-2-rt">
                                        <div class="text-wrapper-rt">Sent to Muhammad Ramzan</div>
                                        <div class="div-wrapper-rt"><div class="text-wrapper-2-rt">10:50 am</div></div>
                                    </div>
                                </div>
                              
                          </div>
                            
                     </td>
                    </ng-container>
            
                    <ng-container matColumnDef="amount" class="text-wrapper-3-rt">
                        <th mat-header-cell *matHeaderCellDef>   </th>
                        <td mat-cell *matCellDef="let element" style="text-align: right;"> 
                            <span> <b> PKR {{element.amount}}</b></span> 
                        </td>
                    </ng-container>
            
                    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="d-none"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
                </table>
            }@else{
                <p class="pt-3">
                    <img src="/assets/img/icons/info.svg" alt=""> Once you start using your card, youâ€™ll find your most recent transactions here
                </p>
            }
            
        </div>
       </div>
       <!-- Recent Transactions -->

       <!-- More -->
       <div class="mt-4" data-aos="fade-up" data-aos-duration="1000">
        <h5>More</h5>

        <div class="frame-more">
            <div class="content-more">
              <img class="img-more" src="assets/img/icons/discount.svg" />
              <div class="text-wrapper-more">View deals and discounts</div>
            </div>
            <img class="tabler-icon-more" src="assets/img/icons/caret-right.svg" />
           </div>
    
            <div class="frame-more mt-2">
                <div class="content-more">
                <img class="img-more" src="assets/img/icons/credit-card-1.svg" />
                <div class="text-wrapper-more">View deals and discounts</div>
                </div>
                <img class="tabler-icon-more" src="assets/img/icons/caret-right.svg" />
            </div>
    
            <div class="frame-more mt-2">
            <div class="content-more">
              <img class="img-more" src="assets/img/icons/manage-card.svg" />
              <div class="text-wrapper-more">View deals and discounts</div>
            </div>
            <img class="tabler-icon-more" src="assets/img/icons/caret-right.svg" />
            </div>

       </div>
       <!-- More -->
    </div>
</div>
