<div class="row customerInfo p-3">
  <div class="h4">Overview</div>
</div>
<div class="row">
  <div class="col-12">
    <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12 m-auto p-lg-4 p-sm-0 p-md-0 mt-4" data-aos="fade-up" data-aos-duration="1000">
      <div class="position-static">
        <!-- Accounts Relationship -->
        <mat-tab-group animationDuration="2000ms" #tabGroup (selectedTabChange)="tabChanged($event)" >
          <mat-tab label="Relationships" >

            <!-- Carousel -->
            <mdb-carousel #carousel
              [controls]="true"
              [controls]="false"
              [interval]="0"
              [indicators]="true"
              [id]="0"
              class="relationship-bg mt-4">
              <div class="p-3 mt-4">
                <div class="d-flex justify-content-between">
                  <div>
                    <i
                      class="fa fa-arrow-left primary-font-color"
                      (click)="updateRelationship('p'); carousel.prev()"
                    ></i>
                  </div>
                  <div>
                    <p>
                      Relationship {{ currentRelationship }}/
                      {{ totalRelationships }}
                    </p>
                  </div>
                  <div>
                    <i
                      class="fa fa-arrow-right primary-font-color"
                      (click)="updateRelationship('n'); carousel.next()"
                    ></i>
                  </div>
                </div>
              </div>

              @for (item of relationships; track $index) {

              <mdb-carousel-item class="ps-4 pe-4 pb-4">
                <div class="card">
                  <div class="card-header bg-danger">
                    <div class="p-2">
                      <h3 class="white-color">
                        <span style="font-size: smaller">PKR</span>
                        {{ item.amount }}
                      </h3>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="d-block p-2 ps-3">
                      <h4>{{ item.accountType }}</h4>
                      <h3>
                        <b>{{ item.accountTitle }}</b>
                      </h3>
                      <p class="primary-font-color">{{ item.accountNumber }}</p>
                    </div>
                  </div>
                </div>
              </mdb-carousel-item>

              } @empty {
              <p>No Relationship found</p>
              }
            </mdb-carousel>
            <!-- Carousel End -->

            <!-- Insight -->
            <div class="d-flex justify-content-center viewInsight-bg pb-3">
                <h6 class="primary-font-color" (click)="viewInsight()" style="cursor: pointer;">
                  View insight <i class="fa fa-angle-right"></i>
                </h6>
            </div>
            <!-- Insight End -->

            <!-- More Options -->
            <div>
                <div class="d-flex justify-content-around mt-3">
                <div class="frame" data-toggle="modal" (click)="accountDetailsModal()" style="cursor: pointer;">
                    <div class="tabler-icon-wrapper">
                    <img class="tabler-icon" src="/assets/img/icons/eye.svg" />
                    </div>
                    <div class="text-wrapper">See details</div>
                </div>
    
                <div class="frame">
                    <div class="tabler-icon-wrapper">
                    <img class="tabler-icon" src="/assets/img/icons/my-qr.svg" />
                    </div>
                    <div class="text-wrapper">My QR Code</div>
                </div>
    
                <div class="frame">
                    <div class="tabler-icon-wrapper">
                    <img class="tabler-icon" src="/assets/img/icons/star.svg" />
                    </div>
                    <div class="text-wrapper">Mark Default</div>
                </div>
    
                <div class="frame" (click)="myCardsModal()" style="cursor: pointer;"> 
                    <div class="tabler-icon-wrapper">
                    <img
                        class="tabler-icon"
                        src="/assets/img/icons/card-light.svg"
                    />
                    </div>
                    <div class="text-wrapper">My Cards</div>
                </div>
                </div>
            </div>
            <!-- End -->
          </mat-tab>

          <mat-tab label="Orbits">
            <!-- Carousel -->
            <mdb-carousel #carousel2
            [controls]="true"
            [controls]="false"
            [interval]="0"
            [indicators]="true"
            [id]="1"
            class="relationship-bg mt-4">
            <div class="p-3 mt-4">
              <div class="d-flex justify-content-between">
                <div>
                  <i
                    class="fa fa-arrow-left primary-font-color"
                    (click)="updateOrbitRelationship('p'); carousel2.prev()"
                  ></i>
                </div>
                <div>
                  <p>
                    Relationship {{ currentOrbitRelationship }}/
                    {{ totalOrbitRelationships }}
                  </p>
                </div>
                <div>
                  <i
                    class="fa fa-arrow-right primary-font-color"
                    (click)="updateOrbitRelationship('n'); carousel2.next()"
                  ></i>
                </div>
              </div>
            </div>

            @for (item of orbitRelationships; track $index) {

            <mdb-carousel-item class="ps-4 pe-4 pb-4">
              <div class="card">
                <div class="card-header bg-danger">
                  <div class="p-2">
                    <h3 class="white-color">
                        {{ item.amount }}
                        <span style="font-size: smaller">Points</span>
                     
                    </h3>
                  </div>
                </div>
                <div class="card-body">
                  <div class="d-flex p-2 ps-3 align-content-center align-items-center">
                    <h4>Orbit Tier</h4>
                    <img src="/assets/img/icons/orbit-tier-6.svg" alt="" class="tabler-icon">
                    
                  </div>
                  <h5 class="ps-3">{{ item.accountTitle }}</h5>
                </div>
              </div>
            </mdb-carousel-item>

            } @empty {
            <p>No Relationship found</p>
            }
            </mdb-carousel>
            <!-- Carousel End -->

            <!-- Orbit Dashbaord -->
            <div class="d-flex justify-content-center viewInsight-bg pb-3">
                <h6 class="primary-font-color">
                    Go to Orbits dashboard <i class="fa fa-angle-right"></i>
                </h6>
            </div>
            <!-- Orbit Dashboard -->

            <!-- Orbits Summary -->
            <div class="d-flex ms-3 me-3 mt-2 mb-2">
                <div class="p-2 bd-highlight">
                    <h4>Summary</h4>
                </div>
                <div class="pt-2 bd-highlight align-self-center">
                    <p>October 2023</p>
                </div>
                <div class="p-2 flex-grow-1 text-end bd-highlight align-self-center" >
                    <p class="primary-font-color" (click)="orbitSummary()" style="cursor: pointer;"><b>See details</b></p>
                </div>
            </div>

            <div class="frame-summary ms-3 me-3">
                <div class="div-summary p-2 justify-content-around">
                    <div class="div-2-summary p-1">
                        <img src="/assets/img/icons/arrow-down-green.svg" alt="" class="tabler-icon-summary">
                        <div class="text-wrapper">
                            <h4>3,000</h4>
                        </div>
                        <div class="text-wrapper">
                            Earned
                        </div>
                    </div>
                    <div class="div-2-summary p-1">
                        <img src="/assets/img/icons/arrow-down-green.svg" alt="" class="tabler-icon-summary">
                        <div class="text-wrapper">
                            <h4>3,000</h4>
                        </div>
                        <div class="text-wrapper">
                            Earned
                        </div>
                    </div>
                    <div class="div-2-summary p-1">
                        <img src="/assets/img/icons/arrow-up-red.svg" alt="" class="tabler-icon-summary">
                        <div class="text-wrapper">
                            <h4 style="color: #B40C02;">3,000</h4>
                        </div>
                        <div class="text-wrapper">
                            Earned
                        </div>
                    </div>
                    <div class="div-2-summary p-1">
                        <img src="/assets/img/icons/three-horizontal-dots.svg" alt="" class="tabler-icon-summary">
                        <div class="text-wrapper">
                            <h4 style="color: #767676">0</h4>
                        </div>
                        <div class="text-wrapper">
                            Earned
                        </div>
                    </div>
                </div>
            </div>
            <!-- End -->
          </mat-tab>
        </mat-tab-group>

        <!-- End -->
      </div>

      <!-- Recent transaction -->
      <app-recent-transactions [transactionType]="selectedRelation"  />
      
      <!-- End -->
    </div>
  </div>
</div>
